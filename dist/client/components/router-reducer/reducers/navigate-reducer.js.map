{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["handleExternalUrl","navigateReducer","state","mutable","url","pendingPush","previousTree","tree","mpaNavigation","canonicalUrl","scrollableSegments","undefined","handleMutable","generateSegmentsFromPatch","flightRouterPatch","segments","segment","parallelRoutes","Object","keys","length","parallelRouteKey","parallelRoute","entries","childSegment","push","addRefetchToLeafSegments","newCache","currentCache","flightSegmentPath","treePatch","data","appliedPatch","status","CacheStates","READY","subTreeData","Map","segmentPathsToFill","map","segmentPaths","res","fillCacheWithDataProperty","bailOptimistic","action","isExternalUrl","navigateType","cache","forceOptimisticNavigation","shouldScroll","pathname","hash","href","createHrefFromUrl","prunePrefetchCache","prefetchCache","isForCurrentTree","JSON","stringify","preserveCustomHistoryState","toString","prefetchValues","get","kind","PrefetchKind","TEMPORARY","split","optimisticTree","createOptimisticTree","temporaryCacheNode","fetchResponse","fetchServerResponse","nextUrl","buildId","optimisticFlightSegmentPath","slice","flat","patchedTree","hashFragment","set","prefetchTime","Date","now","treeAtTimeOfPrefetch","lastUsedTime","process","env","NODE_ENV","AUTO","newPrefetchValue","prefetchEntryCacheStatus","getPrefetchEntryCacheStatus","prefetchQueue","bump","then","flightData","canonicalUrlOverride","postponed","currentTree","flightDataPath","flightSegmentPathWithLeadingEmpty","newTree","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","applied","applyFlightData","PrefetchCacheEntryStatus","reusable","stale","hardNavigate","shouldHardNavigate","invalidateCacheBelowFlightSegmentPath","subSegment","scrollableSegmentPath"],"mappings":"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"}